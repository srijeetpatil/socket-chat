(this["webpackJsonpsocket-chat"]=this["webpackJsonpsocket-chat"]||[]).push([[0],{133:function(n,t,e){"use strict";e.d(t,"b",(function(){return c})),e.d(t,"a",(function(){return a}));var r=e(72),c=function(n){try{return r.AES.encrypt(JSON.stringify(n),"sdfnao2b3bjhk45kb234h13jbdkfj9283fbkabsuw8134").toString()}catch(t){console.log(t)}},a=function(n){try{var t=r.AES.decrypt(n,"sdfnao2b3bjhk45kb234h13jbdkfj9283fbkabsuw8134");return t.toString()?JSON.parse(t.toString(r.enc.Utf8)):n}catch(e){return e}}},194:function(n,t,e){},200:function(n,t,e){},250:function(n,t){},252:function(n,t){},263:function(n,t){},265:function(n,t){},292:function(n,t){},294:function(n,t){},295:function(n,t){},300:function(n,t){},302:function(n,t){},321:function(n,t){},333:function(n,t){},336:function(n,t){},367:function(n,t,e){"use strict";e.r(t);var r=e(0),c=e.n(r),a=e(105),u=e.n(a),i=(e(200),e(33)),o=e.n(i),d=e(63),s=e(193),j=e(54),f=(e(194),e(187)),A=e(64),h="https://socketchatmern.herokuapp.com/";e(124).hostname().indexOf("local")>-1&&(h="http://localhost:3000/");var Z=Object(f.io)(h),p=Object(A.a)("auth");p&&Z.emit("config",{token:p});var b=e(6),l=e(51),m=e(133),g=e(380),v=e(5);function w(){return Object(v.jsxs)("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"2rem",height:"2rem",viewBox:"0 0 32 32","enable-background":"new 0 0 32 32",style:{marginRight:"0.5rem"},children:[" ",Object(v.jsx)("image",{id:"image0",width:"32",height:"32",x:"0",y:"0",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJN\r\nAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABqlBMVEUAAAD7dZj7dpj7dZr7\r\ndZn8dpn8c5j8dpf8dpj7dJj7cpb2cKb7dZf9dZX7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZn7\r\ndZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7\r\ndZj7dZj7dZn7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7\r\ndZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7\r\ndZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7\r\ndZj7dZj7dZj7dZj7dZj7dZj7dZj7dJf7c5f7dJj7gaH8ka38kKz7f6D7eJr9rMH+5ez/9/n/9vn+\r\n4ur8qb78qL79scX/+vv/////+vz8h6X/7PD7c5b8n7f//P38orr//f78orn8jqr/8vX8jar7d5n9\r\nwtL7gKD+z9v//v/7fZ54y+grAAAAaXRSTlMAAAAAAAAAAAAAAAAAAAMoa6zZ8v0pAzWV3vvflhiG\r\n6Okyvv6/PNUw1Ba6uwGAAS/k44sh1iBd+JvI7u3gwsGRUvRRGcx7I9ciavr5DKOkSvcfApK9Jz6g\r\nHdNjCySw8MRxZlwUEkTP3LFaEkiLAAAAAWJLR0R7T9K1/AAAAAd0SU1FB+UHDQ4INV7jR30AAAG9\r\nSURBVDjLdZNlWwJBFIXvtRNBUSww1lZULCxEVMTuwC6MAQzCxMDu/+y6zOIsLufDPjPnvLN3n9l7\r\nAahQkaFUZWap1VmZKmV2DoJUqNDk5uUTqvyCQo2CRWJQqysiEhXrtBgbPo4lpRyJEFdWgijm5RVE\r\nRhXlISIOK6uIrKoqBQKra0gU1VbzANbpuWgAp69HwIZGce90udyEuF0up+gYGhDim8L54dHxidN5\r\ncnx0GCaaEqC5ha49Xp//9Oz84uzU7/N6qNnSCm1Gur68CvC6Ep7Xl9Q0tkE7ff/NbYDR7Q2t0g4d\r\nocVd8J4F7oN3Ib8DDBR4eGSBxycKGKCTlnh+YYGXV1qiE7ro57y9s8D7G7W7oFu8hY/Pv/zzQ7yJ\r\nAjCRP+LrX056wEwiiS8mJ2botUQSbG7pg/4BwhLSnAxoAa1EQkhyYuV/96CNJb6/2dw2xAM4PMJY\r\nbjezGR3+7TkcG4/WURNjQk/i5JR8XjqNib/AzKx8PjePSULXLxTLxcZFOyYLY2PvkYnVS8srmCLM\r\n1eqa4EyV6UzrtP+59Y1Ne6o4vFtLFs7YrdreSXPs6tf29vf3DvS7jvQ0cXB/AHouXJZwxOM0AAAA\r\nJXRFWHRkYXRlOmNyZWF0ZQAyMDIxLTA3LTEzVDE0OjA4OjUzKzAzOjAw2jiGywAAACV0RVh0ZGF0\r\nZTptb2RpZnkAMjAyMS0wNy0xM1QxNDowODo1MyswMzowMKtlPncAAAAASUVORK5CYII="})]})}var O=Object(r.lazy)((function(){return Promise.all([e.e(3),e.e(5)]).then(e.bind(null,398))})),x=Object(r.lazy)((function(){return e.e(4).then(e.bind(null,399))}));var y=function(n){var t=Object(r.useRef)(null),e=Object(b.f)(),c=Object(r.useState)([]),a=Object(j.a)(c,2),u=a[0],i=a[1],f=Object(r.useState)(!0),A=Object(j.a)(f,2),h=A[0],p=A[1],y=Object(r.useState)(""),k=Object(j.a)(y,2),S=k[0],C=k[1],R=Object(r.useState)(""),N=Object(j.a)(R,2),E=N[0],P=N[1],B=window.location.pathname;B&&(B=B.split("/")[1]),Object(r.useEffect)((function(){t.current=Z,t.current.on("new_message",(function(n){var t=n.docs;i((function(n){return[].concat(Object(s.a)(n),[t])}))}))}),[]),Object(r.useEffect)((function(){(function(){var t=Object(d.a)(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(S){t.next=11;break}return t.prev=1,t.next=4,Object(l.f)();case 4:r=t.sent,C(r.data.username),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0.message);case 11:n.match.params.id?P(n.match.params.id):(P("Global"),e.push("/Global"));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}})()()}),[n]);var U=function(){var n=Object(d.a)(o.a.mark((function n(){var e,r,c;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=document.getElementById("text-edit").value,r=S,c=E,!e){n.next=8;break}return e=Object(m.b)(e),document.getElementById("text-edit").value="",n.next=8,Object(l.d)(e,r,c).then((function(n){var e=n.data.docs;t.current.emit("send_message",{message:e})})).catch((function(n){}));case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(v.jsxs)(r.Suspense,{className:"chatBox",fallback:function(){return Object(v.jsx)(g.a,{})},children:[Object(v.jsxs)("div",{className:"heading",children:[Object(v.jsx)(w,{}),"Socket based chat app, made with MERN Stack"]}),Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("div",{className:"people",children:Object(v.jsx)(O,{changeChat:function(n){e.push("/"+n)},user:S,chat:E,updateChat:function(n){P(n),e.push("/".concat(n))}})}),Object(v.jsx)("div",{className:"chatBox",children:Object(v.jsx)(x,{getMessages:function(){return new Promise(function(){var t=Object(d.a)(o.a.mark((function t(e,r){var c,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(!0),t.next=4,Object(l.a)(n.match.params.id);case 4:return c=t.sent,a=c.data.messages,Array.isArray(a)&&(i(a),p(!1)),t.abrupt("return",e(a));case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",r(t.t0));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(n,e){return t.apply(this,arguments)}}())},messages:u,messagesLoading:h,post:U,chat:E,user:S})})]})]})},k=function(n){n&&n instanceof Function&&e.e(6).then(e.bind(null,396)).then((function(t){var e=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,u=t.getTTFB;e(n),r(n),c(n),a(n),u(n)}))},S=e(65);u.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(S.a,{children:Object(v.jsxs)(b.c,{children:[Object(v.jsx)(b.a,{path:"/:id",component:y}),Object(v.jsx)(b.a,{path:"/",component:y})]})})}),document.getElementById("root")),k()},51:function(n,t,e){"use strict";e.d(t,"c",(function(){return j})),e.d(t,"e",(function(){return f})),e.d(t,"f",(function(){return A})),e.d(t,"b",(function(){return h})),e.d(t,"d",(function(){return Z})),e.d(t,"a",(function(){return p}));var r,c=e(71),a=e.n(c),u=e(188),i=e.n(u),o=e(64);e(124).hostname().indexOf("local")>-1&&(r="http://localhost:3000/");var d=i.a.create({baseURL:r});d.interceptors.request.use((function(n){var t=Object(o.a)("auth");return t&&(n.headers.Authorization="Token "+t),n}),(function(n){return Promise.reject(n)}));var s=d,j=function(n,t){return new Promise((function(e,r){s.post("/api/auth/login",a.a.stringify({username:n,password:t}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(n){return e(n)})).catch((function(n){return r(n)}))}))},f=function(n,t){return new Promise((function(e,r){s.post("/api/auth/signup",a.a.stringify({username:n,password:t}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(n){return e(n)})).catch((function(n){return r(n)}))}))},A=function(){return new Promise((function(n,t){s.get("/api/auth/verifyme").then((function(t){return n(t)})).catch((function(n){return t(n)}))}))},h=function(){return new Promise((function(n,t){s.get("/api/users/").then((function(t){return n(t)})).catch((function(n){return t(n)}))}))},Z=function(n,t,e){return new Promise((function(r,c){var a=new FormData;a.append("message",n),a.append("sender",t),a.append("reciever",e),s.post("/api/message",a).then((function(n){return r(n)})).catch((function(n){return c(n)}))}))},p=function(n){return new Promise((function(t,e){"Global"===n?s.get("/api/message/all").then((function(n){return t(n)})).catch((function(n){return e(n)})):s.post("/api/message/get-messages",a.a.stringify({user2:n}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(n){return t(n)})).catch((function(n){return e(n)}))}))}},64:function(n,t,e){"use strict";function r(n,t,e){var r=new Date;r.setTime(r.getTime()+24*e*60*60*1e3);var c="expires="+r.toUTCString();document.cookie=n+"="+t+";"+c+";path=/"}function c(n){for(var t=n+"=",e=document.cookie.split(";"),r=0;r<e.length;r++){for(var c=e[r];" "===c.charAt(0);)c=c.substring(1);if(0===c.indexOf(t))return c.substring(t.length,c.length)}return""}function a(n){document.cookie=n+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; sameSite: 'none'; secure: true; path=/;"}e.d(t,"c",(function(){return r})),e.d(t,"a",(function(){return c})),e.d(t,"b",(function(){return a}))}},[[367,1,2]]]);
//# sourceMappingURL=main.5bfe6244.chunk.js.map