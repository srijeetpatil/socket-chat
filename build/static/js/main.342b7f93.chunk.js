(this["webpackJsonpsocket-chat"]=this["webpackJsonpsocket-chat"]||[]).push([[0],{147:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t.n(r),a=t(47),u=t.n(a),d=(t(92),t(18)),i=t.n(d),o=t(29),s=t(85),j=t(26),A=(t(86),t(79)),f=t(30),Z="https://socketchatmern.herokuapp.com/";t(67).hostname().indexOf("local")>-1&&(Z="http://localhost:3000/");var h=Object(A.io)(Z),p=Object(f.a)("auth");p&&h.emit("config",{token:p});var l=t(3),m=t(23),b=t(160),g=t(2);function v(){return Object(g.jsxs)("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"2rem",height:"2rem",viewBox:"0 0 32 32","enable-background":"new 0 0 32 32",style:{marginRight:"0.5rem"},children:[" ",Object(g.jsx)("image",{id:"image0",width:"32",height:"32",x:"0",y:"0",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJN\r\nAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABqlBMVEUAAAD7dZj7dpj7dZr7\r\ndZn8dpn8c5j8dpf8dpj7dJj7cpb2cKb7dZf9dZX7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZn7\r\ndZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7\r\ndZj7dZj7dZn7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7\r\ndZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7\r\ndZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7dZj7\r\ndZj7dZj7dZj7dZj7dZj7dZj7dZj7dJf7c5f7dJj7gaH8ka38kKz7f6D7eJr9rMH+5ez/9/n/9vn+\r\n4ur8qb78qL79scX/+vv/////+vz8h6X/7PD7c5b8n7f//P38orr//f78orn8jqr/8vX8jar7d5n9\r\nwtL7gKD+z9v//v/7fZ54y+grAAAAaXRSTlMAAAAAAAAAAAAAAAAAAAMoa6zZ8v0pAzWV3vvflhiG\r\n6Okyvv6/PNUw1Ba6uwGAAS/k44sh1iBd+JvI7u3gwsGRUvRRGcx7I9ciavr5DKOkSvcfApK9Jz6g\r\nHdNjCySw8MRxZlwUEkTP3LFaEkiLAAAAAWJLR0R7T9K1/AAAAAd0SU1FB+UHDQ4INV7jR30AAAG9\r\nSURBVDjLdZNlWwJBFIXvtRNBUSww1lZULCxEVMTuwC6MAQzCxMDu/+y6zOIsLufDPjPnvLN3n9l7\r\nAahQkaFUZWap1VmZKmV2DoJUqNDk5uUTqvyCQo2CRWJQqysiEhXrtBgbPo4lpRyJEFdWgijm5RVE\r\nRhXlISIOK6uIrKoqBQKra0gU1VbzANbpuWgAp69HwIZGce90udyEuF0up+gYGhDim8L54dHxidN5\r\ncnx0GCaaEqC5ha49Xp//9Oz84uzU7/N6qNnSCm1Gur68CvC6Ep7Xl9Q0tkE7ff/NbYDR7Q2t0g4d\r\nocVd8J4F7oN3Ib8DDBR4eGSBxycKGKCTlnh+YYGXV1qiE7ro57y9s8D7G7W7oFu8hY/Pv/zzQ7yJ\r\nAjCRP+LrX056wEwiiS8mJ2botUQSbG7pg/4BwhLSnAxoAa1EQkhyYuV/96CNJb6/2dw2xAM4PMJY\r\nbjezGR3+7TkcG4/WURNjQk/i5JR8XjqNib/AzKx8PjePSULXLxTLxcZFOyYLY2PvkYnVS8srmCLM\r\n1eqa4EyV6UzrtP+59Y1Ne6o4vFtLFs7YrdreSXPs6tf29vf3DvS7jvQ0cXB/AHouXJZwxOM0AAAA\r\nJXRFWHRkYXRlOmNyZWF0ZQAyMDIxLTA3LTEzVDE0OjA4OjUzKzAzOjAw2jiGywAAACV0RVh0ZGF0\r\nZTptb2RpZnkAMjAyMS0wNy0xM1QxNDowODo1MyswMzowMKtlPncAAAAASUVORK5CYII="})]})}var w=Object(r.lazy)((function(){return Promise.all([t.e(3),t.e(5)]).then(t.bind(null,178))})),x=Object(r.lazy)((function(){return t.e(4).then(t.bind(null,179))}));var O=function(e){var n=Object(r.useRef)(null),t=Object(l.f)(),c=Object(r.useState)([]),a=Object(j.a)(c,2),u=a[0],d=a[1],A=Object(r.useState)(!0),f=Object(j.a)(A,2),Z=f[0],p=f[1],O=Object(r.useState)(""),y=Object(j.a)(O,2),k=y[0],C=y[1],S=Object(r.useState)(""),R=Object(j.a)(S,2),P=R[0],B=R[1],N=window.location.pathname;N&&(N=N.split("/")[1]),Object(r.useEffect)((function(){n.current=h,n.current.on("new_message",(function(e){var n=e.docs;d((function(e){return[].concat(Object(s.a)(e),[n])}))}))}),[]),Object(r.useEffect)((function(){(function(){var n=Object(o.a)(i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(k){n.next=11;break}return n.prev=1,n.next=4,Object(m.f)();case 4:r=n.sent,C(r.data.username),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.error(n.t0.message);case 11:e.match.params.id?B(e.match.params.id):(B("Global"),t.push("/Global"));case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(){return n.apply(this,arguments)}})()()}),[e]);var E=function(){var e=Object(o.a)(i.a.mark((function e(){var t,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("text-edit").value,r=k,c=P,!t){e.next=7;break}return document.getElementById("text-edit").value="",e.next=7,Object(m.d)(t,r,c).then((function(e){var t=e.data.docs;n.current.emit("send_message",{message:t})})).catch((function(e){}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)(r.Suspense,{className:"chatBox",fallback:function(){return Object(g.jsx)(b.a,{})},children:[Object(g.jsxs)("div",{className:"heading",children:[Object(g.jsx)(v,{}),"Socket based chat app, made with MERN Stack"]}),Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)("div",{className:"people",children:Object(g.jsx)(w,{changeChat:function(e){t.push("/"+e)},user:k,chat:P,updateChat:function(e){B(e),t.push("/".concat(e))}})}),Object(g.jsx)("div",{className:"chatBox",children:Object(g.jsx)(x,{getMessages:function(){return new Promise(function(){var n=Object(o.a)(i.a.mark((function n(t,r){var c,a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,p(!0),n.next=4,Object(m.a)(e.match.params.id);case 4:return c=n.sent,a=c.data.messages,Array.isArray(a)&&(d(a),p(!1)),n.abrupt("return",t(a));case 10:return n.prev=10,n.t0=n.catch(0),n.abrupt("return",r(n.t0));case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}())},messages:u,messagesLoading:Z,post:E,chat:P,user:k})})]})]})},y=function(e){e&&e instanceof Function&&t.e(6).then(t.bind(null,176)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,a=n.getLCP,u=n.getTTFB;t(e),r(e),c(e),a(e),u(e)}))},k=t(31);u.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(k.a,{children:Object(g.jsxs)(l.c,{children:[Object(g.jsx)(l.a,{path:"/:id",component:O}),Object(g.jsx)(l.a,{path:"/",component:O})]})})}),document.getElementById("root")),y()},23:function(e,n,t){"use strict";t.d(n,"c",(function(){return j})),t.d(n,"e",(function(){return A})),t.d(n,"f",(function(){return f})),t.d(n,"b",(function(){return Z})),t.d(n,"d",(function(){return h})),t.d(n,"a",(function(){return p}));var r,c=t(37),a=t.n(c),u=t(80),d=t.n(u),i=t(30);t(67).hostname().indexOf("local")>-1&&(r="http://localhost:3000/");var o=d.a.create({baseURL:r});o.interceptors.request.use((function(e){var n=Object(i.a)("auth");return n&&(e.headers.Authorization="Token "+n),e}),(function(e){return Promise.reject(e)}));var s=o,j=function(e,n){return new Promise((function(t,r){s.post("/api/auth/login",a.a.stringify({username:e,password:n}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return t(e)})).catch((function(e){return r(e)}))}))},A=function(e,n){return new Promise((function(t,r){s.post("/api/auth/signup",a.a.stringify({username:e,password:n}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return t(e)})).catch((function(e){return r(e)}))}))},f=function(){return new Promise((function(e,n){s.get("/api/auth/verifyme").then((function(n){return e(n)})).catch((function(e){return n(e)}))}))},Z=function(){return new Promise((function(e,n){s.get("/api/users/").then((function(n){return e(n)})).catch((function(e){return n(e)}))}))},h=function(e,n,t){return new Promise((function(r,c){var a=new FormData;a.append("message",e),a.append("sender",n),a.append("reciever",t),s.post("/api/message",a).then((function(e){return r(e)})).catch((function(e){return c(e)}))}))},p=function(e){return new Promise((function(n,t){"Global"===e?s.get("/api/message/all").then((function(e){return n(e)})).catch((function(e){return t(e)})):s.post("/api/message/get-messages",a.a.stringify({user2:e}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return n(e)})).catch((function(e){return t(e)}))}))}},30:function(e,n,t){"use strict";function r(e,n,t){var r=new Date;r.setTime(r.getTime()+24*t*60*60*1e3);var c="expires="+r.toUTCString();document.cookie=e+"="+n+";"+c+";path=/"}function c(e){for(var n=e+"=",t=document.cookie.split(";"),r=0;r<t.length;r++){for(var c=t[r];" "===c.charAt(0);)c=c.substring(1);if(0===c.indexOf(n))return c.substring(n.length,c.length)}return""}function a(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; sameSite: 'none'; secure: true; path=/;"}t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){return c})),t.d(n,"b",(function(){return a}))},86:function(e,n,t){},92:function(e,n,t){}},[[147,1,2]]]);
//# sourceMappingURL=main.342b7f93.chunk.js.map